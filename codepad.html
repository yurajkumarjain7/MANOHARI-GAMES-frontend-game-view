<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Executable Webpage Renderer</title>
    <style>
        /* Custom styles for the responsive layout */
        body { font-family: 'Inter', sans-serif; background-color: #0d1117; color: #c9d1d9; }
        
        /* Style for the code input area */
        #code-input {
            min-height: 250px;
            font-family: monospace;
            background-color: #161b22;
            color: #f0f6fc;
            resize: none;
            padding: 1rem;
        }

        /* Style for the output frame */
        #output-frame {
            background-color: #ffffff; /* White background for the embedded page */
            border: 4px solid #30363d;
            border-radius: 0.75rem;
            min-height: 400px;
            width: 100%;
        }

        /* Canvas styling for the header demo */
        #header-canvas {
            display: block;
            background-color: #1f2732;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container mx-auto p-4 max-w-7xl">
        
        <!-- Header with Canvas Demo -->
        <header class="mb-6 p-4 bg-gray-800 rounded-xl shadow-2xl">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-blue-400 mb-3">
                Live Code Sandbox
            </h1>
            <p class="text-gray-400 mb-4 text-sm sm:text-base">
                Use the input below to render HTML, CSS, and executable JavaScript inside the output frame.
            </p>
            <canvas id="header-canvas" width="300" height="40"></canvas>
            <p class="text-xs text-gray-500 mt-2">
                (The small box above is the actual &lt;canvas&gt; element, used here for graphics.)
            </p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Code Input Panel -->
            <div class="p-4 bg-gray-800 rounded-xl shadow-xl h-full flex flex-col">
                <h2 class="text-2xl font-semibold mb-3 text-gray-200">1. Input Code (HTML/JS)</h2>
                <textarea 
                    id="code-input" 
                    class="w-full flex-grow rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-150"
                >&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body style="padding: 20px; font-family: sans-serif; background-color: #f0f9ff;"&gt;
    &lt;h3 style="color: #0b2d39;"&gt;Hello from the Inner Page!&lt;/h3&gt;
    &lt;p id="demo-text"&gt;Watch the time update below.&lt;/p&gt;
    &lt;button onclick="updateText()" style="background-color: #3b82f6; color: white; padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer;"&gt;
        Click Me
    &lt;/button&gt;
    
    &lt;script&gt;
        function updateText() {
            const el = document.getElementById('demo-text');
            el.textContent = 'Button was clicked at: ' + new Date().toLocaleTimeString();
        }
        
        // This script is fully executable inside the frame!
        setInterval(() => {
            console.log("I am running inside the iframe!");
        }, 3000);
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</textarea>
                
                <button 
                    onclick="renderCode()"
                    class="mt-4 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition duration-300 shadow-md transform hover:scale-[1.01] focus:outline-none focus:ring-4 focus:ring-blue-500"
                >
                    Render Code in Frame
                </button>
            </div>

            <!-- Output Frame Panel -->
            <div class="p-4 bg-gray-800 rounded-xl shadow-xl flex flex-col">
                <h2 class="text-2xl font-semibold mb-3 text-gray-200">2. Live Output Frame</h2>
                <iframe id="output-frame" title="Code Output Frame"></iframe>
            </div>
        </div>
    </div>

    <script>
        // --- Core JavaScript for Functionality ---

        // Function to inject the code into the iframe
        function renderCode() {
            try {
                const codeInput = document.getElementById('code-input');
                const outputFrame = document.getElementById('output-frame');
                const code = codeInput.value;

                // Reset the iframe content
                outputFrame.contentDocument.open();
                // Write the new HTML/JS content. This is what allows the JS to execute.
                outputFrame.contentDocument.write(code);
                outputFrame.contentDocument.close();

                console.log('Code successfully rendered in the iframe.');
            } catch (error) {
                console.error('Error rendering code:', error);
                // Display a user-friendly error message in the iframe itself
                const outputFrame = document.getElementById('output-frame');
                outputFrame.contentDocument.body.innerHTML = `
                    <div style="padding: 20px; color: red; font-family: sans-serif;">
                        <h2>Render Error</h2>
                        <p>Could not render code. Check the console for details.</p>
                        <p>Error: ${error.message}</p>
                    </div>
                `;
            }
        }

        // --- Canvas Initialization and Drawing ---

        function initCanvas() {
            const canvas = document.getElementById('header-canvas');
            const ctx = canvas.getContext('2d');
            
            // Set canvas dimensions dynamically based on its container size
            const rect = canvas.parentNode.getBoundingClientRect();
            canvas.width = rect.width - 32; // -32 for padding in parent
            canvas.height = 40; 
            
            // Draw a simple graphic to demonstrate the canvas's true purpose
            ctx.fillStyle = '#1e3a8a'; // Dark blue
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw a diagonal pattern
            ctx.strokeStyle = '#3b82f6'; // Light blue
            ctx.lineWidth = 1;
            for (let i = 0; i < canvas.width; i += 10) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i - canvas.height, canvas.height);
                ctx.stroke();
            }

            // Draw text over the pattern
            ctx.fillStyle = 'white';
            ctx.font = '20px Inter, sans-serif';
            ctx.textAlign = 'left';
            ctx.textBaseline = 'middle';
            ctx.fillText('Executable Code Frame', 10, canvas.height / 2);
        }

        // --- Initialization on Load ---

        window.onload = function() {
            initCanvas(); // Initialize the canvas element
            renderCode(); // Load the default example code on startup

            // Re-initialize canvas on window resize for responsiveness
            window.addEventListener('resize', initCanvas);
        };
        
    </script>
</body>
</html>

